<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Address</title>
    <script src="appearance.js" defer></script>
    <link rel="stylesheet" href="appearance.css">

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            padding: 20px;
            max-width: 400px;
            margin: 50px auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            background: #fff;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
        }

        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .dropdown-container {
            border: 1px solid #ccc;
            background-color: #fff;
            max-height: 150px;
            overflow-y: auto;
            position: absolute;
            width: 100%;
            z-index: 1;
        }

        .dropdown-item {
            padding: 8px;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background-color: #e0e0e0;
        }

        .btn {
            width: 100%;
            background-color: #4CAF50;
            color: #fff;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

    <h2>Create Address</h2>

    <div class="form-group">
        <label>Pincode:</label>
        <input type="number" id="pincodeInput" placeholder="Enter Pincode">
    </div>

    <div class="form-group">
        <label>State:</label>
        <input type="text" id="stateInput" placeholder="Select State">
    </div>

    <div class="form-group">
        <label>City:</label>
        <input type="text" id="cityInput" placeholder="Select City">
    </div>

    <div class="form-group">
        <label>House No. / Building Name:</label>
        <input type="text" id="houseNoInput" placeholder="Enter House/Building Name">
    </div>

    <div class="form-group">
        <label>Road Name, Area, Colony:</label>
        <input type="text" id="roadNameInput" placeholder="Enter Road/Area/Colony">
    </div>

    <div class="form-group">
        <label>Type of Address:</label>
        <input type="radio" id="home" name="addressType" value="Home"> Home
        <input type="radio" id="work" name="addressType" value="Work"> Work
    </div>

    <button class="btn" id="useLocationBtn">Use My Location</button>
    <button class="btn" id="saveAddressBtn">Save Address</button>

    <script>

        // addresscreate.html JavaScript Implementation

document.addEventListener("DOMContentLoaded", function () {
    const stateInput = document.getElementById("stateInput");
    const cityInput = document.getElementById("cityInput");
    const useLocationBtn = document.getElementById("useLocationBtn");

    // Sample Data for States and Cities
    const states = ["Tamil Nadu", "Karnataka", "Maharashtra", "Kerala", "Delhi", "Punjab", "West Bengal"];
    const cities = {
        "Tamil Nadu": ["Chennai", "Coimbatore", "Madurai"],
        "Karnataka": ["Bangalore", "Mysore", "Mangalore"],
        "Maharashtra": ["Mumbai", "Pune", "Nagpur"],
        "Kerala": ["Kochi", "Trivandrum", "Kozhikode"],
        "Delhi": ["New Delhi", "Dwarka", "Karol Bagh"],
        "Punjab": ["Amritsar", "Ludhiana", "Patiala"],
        "West Bengal": ["Kolkata", "Durgapur", "Siliguri"]
    };

    // Populate State Dropdown
    stateInput.addEventListener("focus", function () {
        showDropdown(stateInput, states);
    });

    // Populate City Dropdown Based on Selected State
    stateInput.addEventListener("input", function () {
        const selectedState = stateInput.value;
        if (cities[selectedState]) {
            showDropdown(cityInput, cities[selectedState]);
        }
    });

    // Show Dropdown Function
    function showDropdown(input, options) {
        const dropdown = document.createElement("div");
        dropdown.className = "dropdown-container";

        options.forEach(option => {
            const item = document.createElement("div");
            item.textContent = option;
            item.className = "dropdown-item";
            item.onclick = function () {
                input.value = option;
                dropdown.remove();
            };
            dropdown.appendChild(item);
        });

        input.parentElement.appendChild(dropdown);
    }

    // Use My Location Functionality
    useLocationBtn.addEventListener("click", function () {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position) {
                fetch(`https://nominatim.openstreetmap.org/reverse?lat=${position.coords.latitude}&lon=${position.coords.longitude}&format=json`)
                    .then(response => response.json())
                    .then(data => {
                        stateInput.value = data.address.state || "";
                        cityInput.value = data.address.city || "";
                    })
                    .catch(err => alert("Location fetch failed."));
            });
        } else {
            alert("Geolocation is not supported by your browser.");
        }
    });

    // Save Address
    document.getElementById("saveAddressBtn").addEventListener("click", function () {
        const addressData = {
            pincode: document.getElementById("pincodeInput").value.trim(),
            state: stateInput.value.trim(),
            city: cityInput.value.trim(),
            houseNo: document.getElementById("houseNoInput").value.trim(),
            roadName: document.getElementById("roadNameInput").value.trim(),
            addressType: document.querySelector('input[name="addressType"]:checked')?.value || ""
        };

        for (let key in addressData) {
            if (!addressData[key]) {
                alert(`${key} is required.`);
                return;
            }
        }

        let savedAddresses = JSON.parse(localStorage.getItem("addresses")) || [];
        if (savedAddresses.length >= 2) {
            alert("You can only save up to 2 addresses.");
            return;
        }
        savedAddresses.push(addressData);
        localStorage.setItem("addresses", JSON.stringify(savedAddresses));

        alert("Address saved successfully!");
        window.location.href = "profile.html"; // Redirect back to main page
    });
});

    </script>
</body>
</html>
